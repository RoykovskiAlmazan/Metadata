<Window x:Class="Conversor.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="VideosChidos" Height="600" Width="1000">
    <DockPanel>
        <!-- Menú -->
        

        <!-- Barra de controles -->
        <ToolBar DockPanel.Dock="Top">
            <Button x:Name="BtnCargar" Content="Cargar" Click="CargarVideo_Click"/>
            <Separator/>
            <Button x:Name="BtnPlay"   Content="Play"  Click="Play_Click"  IsEnabled="False"/>
            <Button x:Name="BtnPausa"  Content="Pausa" Click="Pausa_Click" IsEnabled="False"/>
            <Button x:Name="BtnStop"   Content="Stop"  Click="Stop_Click"  IsEnabled="False"/>
        </ToolBar>

        <!-- Contenido principal: Izq video | Splitter | Der tabs -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="5"/>
                <ColumnDefinition Width="3*"/>
            </Grid.ColumnDefinitions>

            <!-- Video -->
            <!-- Video + barra de tiempo -->
            <!-- Video + barra de tiempo -->
            <Border Grid.Column="0" Padding="8">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <!-- Video -->
                    <MediaElement x:Name="MediaPlayer"
                      Grid.Row="0"
                      LoadedBehavior="Manual"
                      UnloadedBehavior="Stop"
                      Stretch="Uniform"
                      MediaOpened="MediaPlayer_MediaOpened"
                      MediaEnded="MediaPlayer_MediaEnded"/>

                    <!-- Barra de tiempo + tiempo en segundos -->
                    <Grid Grid.Row="1" Margin="0,8,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <Slider x:Name="TimelineSlider"
                    Grid.Column="0"
                    Minimum="0"
                    Maximum="1"
                    IsSnapToTickEnabled="False"
                    PreviewMouseDown="TimelineSlider_PreviewMouseDown"
                    PreviewMouseUp="TimelineSlider_PreviewMouseUp"
                    ValueChanged="TimelineSlider_ValueChanged"/>

                        <TextBlock x:Name="LblTime"
                       Grid.Column="1"
                       Margin="8,0,0,0"
                       VerticalAlignment="Center"
                       FontFamily="Consolas"
                       FontSize="12"
                       Text="0.00 s"/>
                    </Grid>
                </Grid>
            </Border>


            <!-- Splitter -->
            <GridSplitter Grid.Column="1"
                          HorizontalAlignment="Stretch"
                          VerticalAlignment="Stretch"
                          Background="#DDD"
                          Width="5"
                          ShowsPreview="True"/>

            <!-- Panel derecho con tabs para crecer en el futuro -->
            <DockPanel Grid.Column="2" LastChildFill="True">
                <TabControl x:Name="RightTabs">
                    <!-- Tab 1: Transcripción -->
                    <TabItem Header="Transcripción">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="8">
                            <TextBox x:Name="TxtTranscript"
                                     TextWrapping="Wrap"
                                     AcceptsReturn="True"
                                     IsReadOnly="True"
                                     VerticalScrollBarVisibility="Auto"
                                     BorderThickness="0"
                                     FontFamily="Consolas"
                                     FontSize="13"/>
                        </ScrollViewer>
                    </TabItem>

                    <!-- Tab 2: Comandos -->
                    <TabItem Header="Comandos">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <TextBlock Text="Comandos detectados"
                                       Margin="8,8,8,0"
                                       FontWeight="Bold"/>

                            <ListView x:Name="LstComandos"
                                      Grid.Row="1"
                                      Margin="8"
                                      MouseLeftButtonUp="LstComandos_MouseLeftButtonUp">
                                <!-- Menú contextual para editar/eliminar/agregar -->
                                <ListView.ContextMenu>
                                    <ContextMenu>
                                        <MenuItem Header="Editar comando"
                                                  Click="EditarComando_Click"/>
                                        <MenuItem Header="Eliminar comando"
                                                  Click="EliminarComando_Click"/>
                                        <Separator/>
                                        <MenuItem Header="Agregar comando debajo"
                                                  Click="AgregarComandoDebajo_Click"/>
                                    </ContextMenu>
                                </ListView.ContextMenu>

                                <ListView.View>
                                    <GridView>
                                        <GridViewColumn Header="Categoría"
                                                        DisplayMemberBinding="{Binding Categoria}"
                                                        Width="100"/>
                                        <GridViewColumn Header="Valor"
                                                        DisplayMemberBinding="{Binding Valor}"
                                                        Width="80"/>
                                        <GridViewColumn Header="t_s"
                                                        DisplayMemberBinding="{Binding TS}"
                                                        Width="80"/>
                                    </GridView>
                                </ListView.View>
                            </ListView>
                        </Grid>
                    </TabItem>

                    <!-- Tab 3: Validación (placeholder) -->
                    <TabItem Header="Validación">
                        <Grid Margin="8">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Text="JSON final (solo lectura)"
                   FontWeight="Bold"
                   Margin="0,0,0,4"/>

                            <TextBox x:Name="TxtJsonMetadata"
                 Grid.Row="1"
                 FontFamily="Consolas"
                 FontSize="12"
                 IsReadOnly="True"
                 TextWrapping="NoWrap"
                 AcceptsReturn="True"
                 VerticalScrollBarVisibility="Auto"
                 HorizontalScrollBarVisibility="Auto"/>

                            <StackPanel Grid.Row="2"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0,8,0,0">
                                <Button x:Name="BtnConfirmarCambios"
                    Content="Confirmar cambios"
                    Width="140"
                    Click="BtnConfirmarCambios_Click"/>
                            </StackPanel>
                        </Grid>
                    </TabItem>


                </TabControl>
            </DockPanel>
        </Grid>
    </DockPanel>
</Window>
